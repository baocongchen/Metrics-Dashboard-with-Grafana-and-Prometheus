curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash

export KUBECONFIG=/etc/rancher/k3s/k3s.yaml
kubectl create namespace monitoring
helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
helm repo add stable https://charts.helm.sh/stable
helm repo update

#helm install prometheus --namespace monitoring
helm install prometheus prometheus-community/kube-prometheus-stack --namespace monitoring

#helm uninstall prometheus-community/kube-prometheus-stack --namespace monitoring
#force delete all pods in monitoring namespace then delete prometheus secret in monitoring namespace

kubectl create namespace observability 
kubectl create -n observability -f https://raw.githubusercontent.com/jaegertracing/jaeger-operator/v1.24.0/deploy/crds/jaegertracing.io_jaegers_crd.yaml 
kubectl create -n observability -f https://raw.githubusercontent.com/jaegertracing/jaeger-operator/v1.24.0/deploy/service_account.yaml 
kubectl create -n observability -f https://raw.githubusercontent.com/jaegertracing/jaeger-operator/v1.24.0/deploy/role.yaml 
kubectl create -n observability -f https://raw.githubusercontent.com/jaegertracing/jaeger-operator/v1.24.0/deploy/role_binding.yaml 
kubectl create -n observability -f https://raw.githubusercontent.com/jaegertracing/jaeger-operator/v1.24.0/deploy/operator.yaml
kubectl create -f https://raw.githubusercontent.com/jaegertracing/jaeger-operator/v1.24.0/deploy/cluster_role.yaml
kubectl create -f https://raw.githubusercontent.com/jaegertracing/jaeger-operator/v1.24.0/deploy/cluster_role_binding.yaml


#kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.9.1/cert-manager.yaml
#kubectl create -f https://github.com/jaegertracing/jaeger-operator/releases/download/v1.37.0/jaeger-operator.yaml -n observability

 
kubectl delete -n observability -f https://raw.githubusercontent.com/jaegertracing/jaeger-operator/v1.24.0/deploy/crds/jaegertracing.io_jaegers_crd.yaml 
kubectl delete -n observability -f https://raw.githubusercontent.com/jaegertracing/jaeger-operator/v1.24.0/deploy/service_account.yaml 
kubectl delete -n observability -f https://raw.githubusercontent.com/jaegertracing/jaeger-operator/v1.24.0/deploy/role.yaml 
kubectl delete -n observability -f https://raw.githubusercontent.com/jaegertracing/jaeger-operator/v1.24.0/deploy/role_binding.yaml 
kubectl delete -n observability -f https://raw.githubusercontent.com/jaegertracing/jaeger-operator/v1.24.0/deploy/operator.yaml
kubectl delete -f https://raw.githubusercontent.com/jaegertracing/jaeger-operator/v1.24.0/deploy/cluster_role.yaml
kubectl delete -f https://raw.githubusercontent.com/jaegertracing/jaeger-operator/v1.24.0/deploy/cluster_role_binding.yaml
kubectl delete -f https://github.com/cert-manager/cert-manager/releases/download/v1.9.1/cert-manager.yaml
kubectl delete namespace observability

# Change type of svc prometheus-grafana to nodePort, add node port 30000
kubectl port-forward deployment/prometheus-grafana 30000 -n monitoring
navigate to vagrant private ip:30000, login with username:admin and password:prom-operator
kubectl port-forward svc/frontend-service 8080:8080

Delete a namespace and all its resources using the commands
kubectl proxy
kubectl get ns observability -o json |   jq '.spec.finalizers=[]' |   curl -X PUT http://localhost:8001/api/v1namespaces/observability/finalize -H "Content-Type: application/json" --data @-